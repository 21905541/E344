Version 4
SHEET 1 2324 836
WIRE -1424 -1120 -1440 -1120
WIRE -1296 -1120 -1344 -1120
WIRE -1216 -1120 -1296 -1120
WIRE -1088 -1120 -1136 -1120
WIRE -1040 -1120 -1088 -1120
WIRE -912 -1120 -960 -1120
WIRE -864 -1120 -912 -1120
WIRE -1296 -1104 -1296 -1120
WIRE -1088 -1104 -1088 -1120
WIRE -912 -1104 -912 -1120
WIRE -304 -1104 -336 -1104
WIRE -192 -1104 -240 -1104
WIRE -144 -1104 -192 -1104
WIRE -32 -1104 -80 -1104
WIRE 16 -1104 -32 -1104
WIRE 128 -1104 80 -1104
WIRE 176 -1104 128 -1104
WIRE -1840 -1072 -1888 -1072
WIRE -2032 -1056 -2080 -1056
WIRE -1936 -1056 -1984 -1056
WIRE -1888 -1056 -1888 -1072
WIRE -1296 -1008 -1296 -1040
WIRE -1184 -1008 -1296 -1008
WIRE -1088 -1008 -1088 -1040
WIRE -1088 -1008 -1184 -1008
WIRE -912 -1008 -912 -1040
WIRE -912 -1008 -1088 -1008
WIRE -1184 -992 -1184 -1008
WIRE -2032 -976 -2032 -1056
WIRE -1984 -976 -2032 -976
WIRE -1936 -976 -1936 -1056
WIRE -1888 -976 -1936 -976
WIRE -2080 -960 -2080 -976
WIRE 1072 -896 864 -896
WIRE 1120 -896 1072 -896
WIRE 1280 -896 1120 -896
WIRE 864 -864 864 -896
WIRE 1120 -864 1120 -896
WIRE 1280 -864 1280 -896
WIRE -2032 -768 -2096 -768
WIRE 1280 -768 1280 -784
WIRE 1360 -768 1280 -768
WIRE 1392 -768 1360 -768
WIRE 1280 -752 1280 -768
WIRE -2032 -720 -2032 -768
WIRE -1920 -720 -1952 -720
WIRE 864 -704 864 -784
WIRE 960 -704 864 -704
WIRE 1120 -704 1120 -784
WIRE 1120 -704 1024 -704
WIRE 1216 -704 1120 -704
WIRE -1920 -624 -1968 -624
WIRE 864 -624 864 -704
WIRE 1040 -624 864 -624
WIRE -1136 -608 -1328 -608
WIRE -1008 -592 -1072 -592
WIRE -912 -592 -1008 -592
WIRE -272 -592 -336 -592
WIRE -1920 -576 -1968 -576
WIRE -1136 -576 -1184 -576
WIRE 800 -576 752 -576
WIRE 1136 -576 1104 -576
WIRE 1360 -576 1360 -768
WIRE 1360 -576 1216 -576
WIRE -272 -496 -272 -592
WIRE -112 -496 -272 -496
WIRE 32 -480 -48 -480
WIRE 864 -480 864 -528
WIRE 1040 -480 1040 -528
WIRE 1040 -480 864 -480
WIRE 1280 -480 1280 -656
WIRE 1280 -480 1040 -480
WIRE -1184 -464 -1184 -576
WIRE -1152 -464 -1184 -464
WIRE -1120 -464 -1152 -464
WIRE -1008 -464 -1008 -592
WIRE -1008 -464 -1040 -464
WIRE -224 -464 -336 -464
WIRE -112 -464 -224 -464
WIRE 1040 -448 1040 -480
WIRE 1440 -80 1440 -96
WIRE 1440 -80 1392 -80
WIRE 1472 -80 1440 -80
WIRE 1552 -48 1424 -48
WIRE 464 0 416 0
WIRE 592 0 544 0
WIRE 1472 0 1472 -80
WIRE -1136 16 -1232 16
WIRE -1104 16 -1136 16
WIRE -1008 16 -1024 16
WIRE -960 16 -1008 16
WIRE -832 16 -880 16
WIRE 1424 16 1424 -48
WIRE 1440 16 1424 16
WIRE 1552 32 1552 -48
WIRE 1552 32 1504 32
WIRE 1632 32 1552 32
WIRE 1392 48 1392 0
WIRE 1440 48 1392 48
WIRE 1392 64 1392 48
WIRE -160 80 -224 80
WIRE 480 80 -160 80
WIRE -1136 96 -1136 16
WIRE -1360 128 -1520 128
WIRE -160 144 -160 80
WIRE -112 144 -160 144
WIRE 0 144 -32 144
WIRE 112 144 0 144
WIRE 1440 144 1392 144
WIRE 1472 144 1472 64
WIRE 1472 144 1440 144
WIRE 0 160 0 144
WIRE 224 160 176 160
WIRE 256 160 224 160
WIRE 304 160 256 160
WIRE 416 160 416 0
WIRE 416 160 384 160
WIRE 1440 160 1440 144
WIRE -1008 176 -1008 16
WIRE -992 176 -1008 176
WIRE 112 176 64 176
WIRE 480 176 480 80
WIRE -1520 192 -1520 128
WIRE -1504 192 -1520 192
WIRE -832 192 -832 16
WIRE -832 192 -928 192
WIRE -704 192 -832 192
WIRE 416 192 416 160
WIRE 448 192 416 192
WIRE -1360 208 -1360 128
WIRE -1360 208 -1440 208
WIRE -1264 208 -1280 208
WIRE -1248 208 -1264 208
WIRE -1136 208 -1136 160
WIRE -1136 208 -1168 208
WIRE -992 208 -1136 208
WIRE 592 208 592 0
WIRE 592 208 512 208
WIRE 624 208 592 208
WIRE 752 208 704 208
WIRE 848 208 752 208
WIRE -1504 224 -1600 224
WIRE 448 224 416 224
WIRE 304 240 272 240
WIRE 416 240 416 224
WIRE 416 240 384 240
WIRE -160 288 -160 144
WIRE 144 288 144 192
WIRE 144 288 -160 288
WIRE 416 288 416 240
WIRE 752 288 752 272
WIRE -1264 320 -1264 208
WIRE -1088 320 -1264 320
WIRE -832 320 -832 192
WIRE -832 320 -1024 320
WIRE 64 320 64 176
WIRE 224 320 224 160
WIRE 224 320 64 320
WIRE 272 352 272 240
WIRE 272 352 208 352
WIRE 1472 464 1344 464
WIRE 1536 464 1472 464
WIRE 1696 464 1696 448
WIRE 1696 464 1600 464
WIRE 1472 496 1472 464
WIRE 1696 496 1696 464
WIRE 1568 544 1568 528
WIRE 1472 592 1472 560
WIRE 1552 592 1472 592
WIRE 1696 592 1696 560
WIRE 1696 592 1552 592
WIRE 1552 608 1552 592
FLAG -2080 -960 0
FLAG -1840 -1072 Stimulus
FLAG -1920 -720 9V
IOPIN -1920 -720 Out
FLAG -2096 -688 0
FLAG -1920 -624 VoutBeatPulses
IOPIN -1920 -624 Out
FLAG -1920 -576 VoutRateAnalogue
IOPIN -1920 -576 Out
FLAG 1568 544 0
FLAG 1552 608 0
FLAG 1344 464 9V
IOPIN 1344 464 In
FLAG 1696 448 5V
IOPIN 1696 448 Out
FLAG 1440 160 0
FLAG 1440 -96 5V
IOPIN 1440 -96 In
FLAG 1632 32 V_gnd
IOPIN 1632 32 Out
FLAG -864 -1120 LowpassOut
IOPIN -864 -1120 Out
FLAG -336 -1104 LowpassOut
IOPIN -336 -1104 In
FLAG 176 -1104 HighpassOut
IOPIN 176 -1104 In
FLAG -912 -592 AmplifiedOut
IOPIN -912 -592 Out
FLAG -1152 -384 V_gnd
IOPIN -1152 -384 In
FLAG -1104 -560 5V
IOPIN -1104 -560 In
FLAG -1328 -608 HighpassOut
IOPIN -1328 -608 In
FLAG -1104 -624 0
FLAG -192 -1024 V_gnd
IOPIN -192 -1024 In
FLAG -1184 -992 V_gnd
IOPIN -1184 -992 In
FLAG -336 -464 AmplifiedOut
IOPIN -336 -464 Out
FLAG 32 -480 ComparatorOut
IOPIN 32 -480 Out
FLAG -80 -512 5V
IOPIN -80 -512 In
FLAG -80 -448 0
FLAG -336 -592 V_gnd
IOPIN -336 -592 In
FLAG -224 -400 0
FLAG 1040 -448 0
FLAG 1072 -896 5V
IOPIN 1072 -896 In
FLAG 672 -576 ComparatorOut
IOPIN 672 -576 Out
FLAG -32 -1024 V_gnd
IOPIN -32 -1024 In
FLAG 480 240 0
FLAG 416 368 0
FLAG 0 240 0
FLAG 144 128 0
FLAG -224 80 5V
IOPIN -224 80 Out
FLAG 256 224 0
FLAG -960 224 0
FLAG -1232 16 0
FLAG -960 160 5V
FLAG -1472 240 0
FLAG -1472 176 5V
FLAG -704 192 Vin_Analogue
IOPIN -704 192 Out
FLAG 208 352 Vin_Analogue
IOPIN 208 352 Out
FLAG 752 288 0
FLAG -1440 -1120 Stimulus
IOPIN -1440 -1120 In
FLAG 1392 -768 VoutBeatPulses
IOPIN 1392 -768 Out
FLAG -1600 224 VoutBeatPulses
IOPIN -1600 224 Out
FLAG 848 208 VoutRateAnalogue
IOPIN 848 208 Out
FLAG 128 -1024 V_gnd
IOPIN 128 -1024 In
SYMBOL voltage -1984 -1072 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -89 197 Left 2
WINDOW 0 -13 54 Left 2
SYMATTR Value PWL file=PWLinput.csv
SYMATTR InstName V2
SYMBOL voltage -1888 -1072 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -386 233 Left 2
WINDOW 0 -11 56 Left 2
SYMATTR Value SINE({sineOffset} {sineAmplitude} {sineFreq})
SYMATTR InstName V3
SYMBOL voltage -2080 -1072 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 3 160 Left 2
WINDOW 0 -13 55 Left 2
SYMATTR Value {dcAmplitude}
SYMATTR InstName V1
SYMBOL voltage -2096 -784 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -46 76 Left 2
WINDOW 0 -13 57 Left 2
SYMATTR Value 9
SYMATTR InstName V4
SYMBOL res -1936 -736 R90
WINDOW 0 -9 30 VBottom 2
WINDOW 3 34 56 VTop 2
SYMATTR InstName R_Sense
SYMATTR Value 0.010
SYMBOL LM7805 1568 480 R0
SYMATTR InstName U1
SYMBOL cap 1456 496 R0
SYMATTR InstName C1
SYMATTR Value 330n
SYMBOL cap 1680 496 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 1376 -96 R0
SYMATTR InstName R5
SYMATTR Value 500k
SYMBOL res 1376 48 R0
SYMATTR InstName R6
SYMATTR Value 500k
SYMBOL res -1328 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10k
SYMBOL res -1120 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10k
SYMBOL cap -1312 -1104 R0
SYMATTR InstName C3
SYMATTR Value 4µ
SYMBOL cap -1104 -1104 R0
SYMATTR InstName C4
SYMATTR Value 4µ
SYMBOL cap -240 -1120 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 6µ
SYMBOL res -208 -1120 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL cap -240 -464 R0
SYMATTR InstName C6
SYMATTR Value 1µ
SYMBOL OpAmps\\UniversalOpamp2 -80 -480 R0
SYMATTR InstName U2
SYMBOL npn 800 -624 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL npn 1104 -624 M0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL npn 1216 -752 R0
SYMATTR InstName Q5
SYMATTR Value 2N2222
SYMBOL res 768 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 5k
SYMBOL res 880 -768 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1136 -768 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R17
SYMATTR Value 50k
SYMBOL res 1296 -768 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R18
SYMATTR Value 5k
SYMBOL cap 1024 -720 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value 5µ
SYMBOL res 1232 -592 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R19
SYMATTR Value 20k
SYMBOL cap -80 -1120 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value 6µ
SYMBOL res -48 -1120 R0
SYMATTR InstName R10
SYMATTR Value 100k
SYMBOL res -944 -1136 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 10k
SYMBOL cap -928 -1104 R0
SYMATTR InstName C8
SYMATTR Value 4µ
SYMBOL res 400 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 10k
SYMBOL res 400 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res 432 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName Rg
SYMATTR Value 20k
SYMBOL res 448 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName Rf
SYMATTR Value 20k
SYMBOL res -16 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL res 16 256 R180
WINDOW 0 48 63 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 2.3k
SYMBOL cap 240 160 R0
SYMATTR InstName C11
SYMATTR Value 10µ
SYMBOL OpAmps\\UniversalOpamp2 480 208 R0
SYMATTR InstName U5
SYMBOL OpAmps\\UniversalOpamp2 144 160 M180
SYMATTR InstName U6
SYMBOL cap -1152 96 R0
SYMATTR InstName C16
SYMATTR Value 50µ
SYMBOL cap -1024 304 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C17
SYMATTR Value 50µ
SYMBOL res -1120 32 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R22
SYMATTR Value 32k
SYMBOL res -864 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 32k
SYMBOL res -1152 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 32k
SYMBOL res -1264 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 32k
SYMBOL Opamps\\UniversalOpamp2 -960 192 R0
SYMATTR InstName U9
SYMBOL Opamps\\UniversalOpamp2 -1472 208 R0
SYMATTR InstName U10
SYMBOL cap 736 208 R0
SYMATTR InstName C9
SYMATTR Value 5µ
SYMBOL res 720 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 100k
SYMBOL res -1024 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 490k
SYMBOL res -1136 -368 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL cap 80 -1120 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 6µ
SYMBOL res 112 -1120 R0
SYMATTR InstName R24
SYMATTR Value 100k
SYMBOL OpAmps\\opamp2 1472 -32 R0
SYMATTR InstName U3
SYMATTR Value TL081
SYMBOL OpAmps\\opamp2 -1104 -528 M180
SYMATTR InstName U4
SYMATTR Value TL081
TEXT -2080 -1120 Left 2 !.tran 0 {transtop} 0 {timestep}
TEXT -1952 -1168 Left 2 !.include E344cfg.txt
TEXT -2288 -1384 Left 2 ;Don't change these -- used for auto-assessments.\nYou may modify input files while developing.\nFor submission: \n  * Use only 9V supply \n  * Connect "Stimulus" to your input\n  * Connect "VoutXXXX" to your output signals.\n  * Only one label name per net.
TEXT -2280 -1168 Left 2 ;Config file:
TEXT -2280 -1120 Left 2 ;Analysis setup:
TEXT -2272 -744 Left 2 ;Battery
TEXT -2280 -1032 Left 2 ;Sensor-\nemulating \nstimulus
TEXT -2272 -608 Left 2 ;Assessed nets:\nConnect to your outputs
TEXT -1552 -1400 Left 2 ;E. Gouws ,  21905541\nDC = 2.1 V\nHeart rate pk = 44.4 mV
TEXT 1256 400 Left 2 !.incl LM78XX_RS.LIB
TEXT -2216 -1456 Left 2 !.incl TL081.lib
TEXT 1536 192 Left 2 ;Virtual Ground
TEXT -1568 -864 Left 2 ;Low Pass Filter
TEXT 1240 552 Left 2 ;Voltage Regulator
TEXT -504 -872 Left 2 ;High Pass Filter
TEXT 56 -344 Left 2 ;Comparator
TEXT -1000 -264 Left 2 ;Non - Inverting Amplifier
TEXT 1304 -424 Left 2 ;Monostabile Multi-Vibrator
TEXT -792 408 Left 2 ;Butterworth Low Pass Filter
TEXT 816 432 Left 2 ;Differential Amplifier
LINE Normal -1792 -1008 -1856 -1008 2
LINE Normal -1792 -864 -1792 -1008 2
LINE Normal -1808 -880 -1792 -864 2
LINE Normal -1792 -864 -1808 -880 2
LINE Normal -1776 -880 -1792 -864 2
LINE Normal -2128 -1008 -2112 -1008 2
LINE Normal -2128 -928 -2128 -1008 2
LINE Normal -2128 -912 -2128 -928 2
LINE Normal -2096 -912 -2128 -912 2
LINE Normal -2112 -928 -2096 -912 2
LINE Normal -2096 -912 -2112 -928 2
LINE Normal -2112 -896 -2096 -912 2
LINE Normal -1968 -944 -1968 -992 2
LINE Normal -1856 -944 -1968 -944 2
LINE Normal -1856 -896 -1856 -944 2
LINE Normal -1872 -912 -1856 -896 2
LINE Normal -1856 -896 -1872 -912 2
LINE Normal -1840 -912 -1856 -896 2
LINE Normal -2304 -544 -2304 -1408 1
LINE Normal -1680 -1408 -1680 -544 1
LINE Normal -1680 -544 -2304 -544 1
LINE Normal -1680 -1408 -2304 -1408 1
RECTANGLE Normal 1760 240 1280 -192 2
RECTANGLE Normal -656 -816 -1600 -1232 2
RECTANGLE Normal 1200 640 1776 368 2
RECTANGLE Normal -592 -832 384 -1216 2
RECTANGLE Normal 288 -288 -544 -656 2
RECTANGLE Normal -656 -208 -1568 -720 2
RECTANGLE Normal 1664 -352 464 -1008 2
RECTANGLE Normal -448 464 -1840 -96 2
RECTANGLE Normal 1120 496 -304 -80 2
